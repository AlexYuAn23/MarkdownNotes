# Docker Compose

现代的多数应用都是通过多个更小的服务互相协同来组成一个完整可用的应用的，比如一个简单的应用可能需要由 Web 前端、订单管理、后台数据库等 3 个服务组成，此时，如果我们手动的通过各种冗长的 docker 命令来将应用组件组织起来，那可是相当的费劲，为了简化这一过程，我们需要一些可以对多容器应用进行部署和管理的应用。

Docker Compose 就是一个单主机的容器编排工具，有了 Docker Compose，我们只需编写一个 docker-compose.yml 配置文件，在文件中描述整个应用，然后使用一条命令就可以按照我们的声明，把所有需要的容器启动起来。

不过，Docker Compose 只能管理当前主机上的 Docker 容器，不能去启动其他主机上的 Docker 容器，如果我们想要对多主机上的容器进行编排管理，可以使用 Kubernetes。

> Docker Compose 的安装：`pip install docker-compose`.



## Docker Compose 常用命令

```shell
# ---------------------------------------------------------------------------------- #
docker-compose up
# 部署一个 Compose 应用，默认情况下会去读取当前文件夹下的 docker-compose.yml 文件
# 也可以使用 -f 参数指定其他文件名
docker-compose -f another-docker-compose.yml up
# 在最后加上 -d 参数，可以后台启动应用，这样比较正规
docker-compose up -d
# ---------------------------------------------------------------------------------- #

# ---------------------------------------------------------------------------------- #
docker-compose stop
# 停止 Compose 应用相关的所有容器，但不会删除它们，之后可以通过 restart 命令重启被停止的应用
docker-compose start
# 启动停止的 Compose 应用
# ---------------------------------------------------------------------------------- #

# ---------------------------------------------------------------------------------- #
docker-compose rm
# 删除已经停止的 Compose 应用，会删除容器和网络，但不会删除数据卷和镜像
# ---------------------------------------------------------------------------------- #

# ---------------------------------------------------------------------------------- #
docker-compose restart
# 重启已经停止的 Compose 应用，重启，也就是说，stop 前对容器的修改 restart 后是不会体现的
# ---------------------------------------------------------------------------------- #

# ---------------------------------------------------------------------------------- #
docker-compose ps
# 列出 Compose 应用中的各个容器
# ---------------------------------------------------------------------------------- #

# ---------------------------------------------------------------------------------- #
docker-compose down
# 停止并删除运行中的 Compose 应用，会删除容器和网络，但不会删除数据卷和镜像
# ---------------------------------------------------------------------------------- #
```

